(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(16),c=n.n(r),a=n(4),o=n(2),u=n(0),i=function(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("p",{children:[e.name," ",e.number]}),Object(u.jsx)("button",{onClick:function(){e.deleteContact()},children:"delete"})]})},s=function(e){var t=e.contacts,n=e.deleteContact,r=t.map((function(e){return Object(u.jsx)(i,{name:e.name,number:e.number,deleteContact:function(){return n(e)}},e.number)}));return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h3",{children:"Numbers"}),r]})},l=n(3),d=n.n(l),f=n(5),j=n(6),b=n.n(j),p="/api/persons",m={getAll:function(){var e=Object(f.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.a.get(p),e.next=3,t;case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(f.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.a.post(p,t),e.next=3,n;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(f.a)(d.a.mark((function e(t,n){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.a.put("".concat(p,"/").concat(t),n),e.next=3,r;case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteContact:function(){var e=Object(f.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.a.delete("".concat(p,"/").concat(t)),e.next=3,n;case 3:return r=e.sent,e.abrupt("return",r.status);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=function(e){var t=e.text,n=e.value,r=e.onChange;return Object(u.jsxs)("p",{children:[t,Object(u.jsx)("input",{value:n,onChange:r})]})},O=function(e){var t=e.message;return null===t?null:Object(u.jsx)("div",{className:"notification",children:t})},v=function(e){var t=e.errorMessage;return null===t?null:Object(u.jsx)("div",{className:"error",children:t})},x=function(){var e=Object(o.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],c=Object(o.useState)(""),i=Object(a.a)(c,2),l=i[0],d=i[1],f=Object(o.useState)(""),j=Object(a.a)(f,2),b=j[0],p=j[1],x=Object(o.useState)(""),g=Object(a.a)(x,2),w=g[0],C=g[1],k=Object(o.useState)(null),y=Object(a.a)(k,2),S=y[0],T=y[1],A=Object(o.useState)(null),E=Object(a.a)(A,2),D=E[0],N=E[1];Object(o.useEffect)((function(){m.getAll().then((function(e){console.log("promise fulfilled"),r(e)}))}),[]);var F=n.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(O,{message:S}),Object(u.jsx)(v,{errorMessage:D}),Object(u.jsx)(h,{text:"filter shown with ",value:w,onChange:function(e){C(e.target.value)}}),Object(u.jsx)("h3",{children:"Add a new"}),Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={name:l,number:b};if(n.some((function(e){return e.name===l}))){if(window.confirm("".concat(l," is already added to phonebook, replace the old number with a new one?"))){var c=n.find((function(e){return e.name===l}));console.log(c.id),m.update(c.id,t).then((function(e){var t=n.filter((function(e){return e.id!==c.id}));r(t.concat(e)),T("Updated information for ".concat(e.name)),setTimeout((function(){T(null)}),5e3)}))}}else m.create(t).then((function(e){console.log(e),r(n.concat(e)),T("Added ".concat(e.name)),setTimeout((function(){T(null)}),5e3)})).catch((function(e){console.log(e.response.data.ValidationError),N("".concat(e.response.data.ValidationError)),setTimeout((function(){N(null)}),5e3)}));d(""),p("")},children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:l,onChange:function(e){d(e.target.value)}})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:b,onChange:function(e){p(e.target.value)}})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]}),Object(u.jsx)(s,{contacts:F,deleteContact:function(e){window.confirm("Delete ".concat(e.name))&&m.deleteContact(e.id).then((function(){console.log("deleted"),r(F.filter((function(t){return t.id!==e.id}))),T("Deleted ".concat(e.name," from phonebook")),setTimeout((function(){T(null)}),5e3)})).catch((function(t){N("Information of ".concat(e.name," has already been removed from server.")),setTimeout((function(){N(null)}),5e3),r(F.filter((function(t){return t.id!==e.id})))}))}})]})};n(41);c.a.render(Object(u.jsx)(x,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.7614b460.chunk.js.map